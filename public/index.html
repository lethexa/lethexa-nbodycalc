<!DOCTYPE html>
<html>
<head>
	<title>N-Body example</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
	<canvas id="myCanvas" width="200" height="200" style="border:1px solid #000000;">
	</canvas> 
	<script src="lethexa-nbodycalc.js"></script>
	<script>
        console.log(nbodycalc);

        var MathFunc = {
                nullVector: function() {
                        return [0,0,0];
                },
                add: function(a, b) {
                        return [
                                a[0] + b[0],
                                a[1] + b[1],
                                a[2] + b[2]
                        ];
                },
                sub: function(a, b) {
                        return [
                                a[0] - b[0],
                                a[1] - b[1],
                                a[2] - b[2]
                        ];
                },
                mulScalar: function(a, s) {
                        return [
                                a[0] * s,
                                a[1] * s,
                                a[2] * s
                        ];
                },
                dot: function(a, b) {
                        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
                },
                lengthSquared: function(a) {
                        return a[0]*a[0] + a[1]*a[1] + a[2]*a[2];
                }
        };

	var mynbodycalc = nbodycalc.withMathFunc(MathFunc);

        var sim = new mynbodycalc.GravitySimulator();
	var bodies = [
        	{
                	position: [0,0,0],
                	velocity: [0,0,0],
                	mass: 20000000.0
        	},
       		{
                	position: [1,1,0],
                	velocity: [-0.05,0,0],
                	mass: 1000000.0
        	}
	];

	for(var i=0;i<bodies.length;i++) {
        	sim.addBody(bodies[i]);
	}

	var c = document.getElementById("myCanvas");
	var ctx = c.getContext("2d");

        for(var t=0;t<500;t++) {
                sim.updateTime(1.0);

		for(var k=0;k<bodies.length;k++) {
			var x = 100 + bodies[k].position[0] * 100;
			var y = 100 - bodies[k].position[1] * 100;

			ctx.beginPath();
			ctx.arc(x,y,2,0,2*Math.PI);
			ctx.stroke();	
		}
        }


	</script>
</body>
</html>
